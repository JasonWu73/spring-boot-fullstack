import{s as h,f as x,b as p,g as j,j as s,B as b,R as g,h as f}from"./index-a82a2232.js";import{u as w}from"./use-title-71d2f9de.js";const N="https://dummyjson.com";async function R(a){const{status:t,data:r,error:e}=await h({...a,url:`${N}${a.url}`});return e?{status:t,error:typeof e=="string"?e:e.message}:{status:t,data:r}}function k(){w("随机商品");const[a,t]=x.useState(0),{data:r,loading:e,error:o,requestData:i,discardRequest:m}=p(R),l=`/products/${Math.floor(Math.random()*110)}`;j(()=>{const d=Date.now();return c().then(),()=>m({url:l},d)});async function c(){const{data:d}=await i({url:l});d&&t(u=>u+1)}return s.jsxs("div",{className:"mx-auto grid w-[500px] grid-cols-1 grid-rows-[2rem_8rem_3rem_2rem] place-items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow dark:border-slate-800 dark:bg-slate-950",children:[s.jsxs("div",{className:"row-span-1",children:[e&&s.jsx(n,{label:"加载中..."}),!e&&o&&s.jsx(n,{label:o,isError:!0}),!e&&!o&&r&&s.jsx(n,{label:`${r.id} - ${r.title}`})]}),s.jsxs("div",{className:"row-span-1",children:[!r&&s.jsx("div",{className:"h-32 w-32 rounded-full border border-gray-300 bg-gradient-to-r from-slate-100 to-slate-300 object-cover shadow-sm"}),!e&&!o&&r&&s.jsx("img",{src:r.thumbnail,alt:r.title,className:"h-32 w-32 rounded-full border border-gray-300 object-cover shadow-sm"})]}),s.jsx("div",{className:"row-span-1",children:s.jsxs(b,{onClick:c,className:"my-4",disabled:e,children:[e&&s.jsx(g,{className:"mr-2 h-4 w-4 animate-spin"}),"获取商品"]})}),s.jsx("div",{className:"row-span-1",children:s.jsxs("p",{children:["已加载 ",s.jsx("strong",{children:a})," 个商品"]})})]})}function n({label:a,isError:t=!1}){return s.jsx("h1",{className:f(t&&"text-red-500 dark:text-red-600"),children:a})}export{k as default};
