import{r as o,$ as O,f as He,g as _,_ as p,h as w,i as j,k as Ve,l as Ge,m as Q,n as Qe,o as Y,p as Ye,q as qe,t as Xe,v as Je,w as Ze,x as K,y as et,j as c,e as v,z as q,A as le,C as tt,D as X,E as at,L as ot,R as S,F as de,U as H,G as J,H as nt,I as W,b as st,u as rt,S as ct,c as lt,J as dt,K as it,M as ut,O as ft,B as $t,P as pt,Q as bt,T as mt}from"./index-132372d4.js";import{T as gt,a as vt,b as xt,c as ht}from"./Tooltip-579ef7c8.js";import{b as Et,a as Dt,u as _t}from"./use-title-f4fa0656.js";import{I as yt,C as At}from"./CustomFormField-e959eb86.js";const V="dismissableLayer.update",wt="dismissableLayer.pointerDownOutside",Rt="dismissableLayer.focusOutside";let ae;const Nt=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ct=o.forwardRef((e,t)=>{var a;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:d,onInteractOutside:l,onDismiss:i,...f}=e,u=o.useContext(Nt),[b,T]=o.useState(null),m=(a=b==null?void 0:b.ownerDocument)!==null&&a!==void 0?a:globalThis==null?void 0:globalThis.document,[,h]=o.useState({}),$=O(t,g=>T(g)),A=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=A.indexOf(x),E=b?A.indexOf(b):-1,D=u.layersWithOutsidePointerEventsDisabled.size>0,F=E>=C,ze=Ot(g=>{const I=g.target,te=[...u.branches].some(U=>U.contains(I));!F||te||(r==null||r(g),l==null||l(g),g.defaultPrevented||i==null||i())},m),ee=Pt(g=>{const I=g.target;[...u.branches].some(U=>U.contains(I))||(d==null||d(g),l==null||l(g),g.defaultPrevented||i==null||i())},m);return He(g=>{E===u.layers.size-1&&(s==null||s(g),!g.defaultPrevented&&i&&(g.preventDefault(),i()))},m),o.useEffect(()=>{if(b)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ae=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(b)),u.layers.add(b),oe(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ae)}},[b,m,n,u]),o.useEffect(()=>()=>{b&&(u.layers.delete(b),u.layersWithOutsidePointerEventsDisabled.delete(b),oe())},[b,u]),o.useEffect(()=>{const g=()=>h({});return document.addEventListener(V,g),()=>document.removeEventListener(V,g)},[]),o.createElement(_.div,p({},f,{ref:$,style:{pointerEvents:D?F?"auto":"none":void 0,...e.style},onFocusCapture:w(e.onFocusCapture,ee.onFocusCapture),onBlurCapture:w(e.onBlurCapture,ee.onBlurCapture),onPointerDownCapture:w(e.onPointerDownCapture,ze.onPointerDownCapture)}))});function Ot(e,t=globalThis==null?void 0:globalThis.document){const a=j(e),n=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{const r=l=>{if(l.target&&!n.current){let f=function(){ie(wt,a,i,{discrete:!0})};const i={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=f,t.addEventListener("click",s.current,{once:!0})):f()}else t.removeEventListener("click",s.current);n.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,a]),{onPointerDownCapture:()=>n.current=!0}}function Pt(e,t=globalThis==null?void 0:globalThis.document){const a=j(e),n=o.useRef(!1);return o.useEffect(()=>{const s=r=>{r.target&&!n.current&&ie(Rt,a,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,a]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function oe(){const e=new CustomEvent(V);document.dispatchEvent(e)}function ie(e,t,a,{discrete:n}){const s=a.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&s.addEventListener(e,t,{once:!0}),n?Ve(s,r):s.dispatchEvent(r)}const B="focusScope.autoFocusOnMount",z="focusScope.autoFocusOnUnmount",ne={bubbles:!1,cancelable:!0},Tt=o.forwardRef((e,t)=>{const{loop:a=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...d}=e,[l,i]=o.useState(null),f=j(s),u=j(r),b=o.useRef(null),T=O(t,$=>i($)),m=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(n){let $=function(E){if(m.paused||!l)return;const D=E.target;l.contains(D)?b.current=D:N(b.current,{select:!0})},A=function(E){if(m.paused||!l)return;const D=E.relatedTarget;D!==null&&(l.contains(D)||N(b.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const F of E)F.removedNodes.length>0&&N(l)};document.addEventListener("focusin",$),document.addEventListener("focusout",A);const C=new MutationObserver(x);return l&&C.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",A),C.disconnect()}}},[n,l,m.paused]),o.useEffect(()=>{if(l){re.add(m);const $=document.activeElement;if(!l.contains($)){const x=new CustomEvent(B,ne);l.addEventListener(B,f),l.dispatchEvent(x),x.defaultPrevented||(Ft(kt(ue(l)),{select:!0}),document.activeElement===$&&N(l))}return()=>{l.removeEventListener(B,f),setTimeout(()=>{const x=new CustomEvent(z,ne);l.addEventListener(z,u),l.dispatchEvent(x),x.defaultPrevented||N($??document.body,{select:!0}),l.removeEventListener(z,u),re.remove(m)},0)}}},[l,f,u,m]);const h=o.useCallback($=>{if(!a&&!n||m.paused)return;const A=$.key==="Tab"&&!$.altKey&&!$.ctrlKey&&!$.metaKey,x=document.activeElement;if(A&&x){const C=$.currentTarget,[E,D]=jt(C);E&&D?!$.shiftKey&&x===D?($.preventDefault(),a&&N(E,{select:!0})):$.shiftKey&&x===E&&($.preventDefault(),a&&N(D,{select:!0})):x===C&&$.preventDefault()}},[a,n,m.paused]);return o.createElement(_.div,p({tabIndex:-1},d,{ref:T,onKeyDown:h}))});function Ft(e,{select:t=!1}={}){const a=document.activeElement;for(const n of e)if(N(n,{select:t}),document.activeElement!==a)return}function jt(e){const t=ue(e),a=se(t,e),n=se(t.reverse(),e);return[a,n]}function ue(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function se(e,t){for(const a of e)if(!St(a,{upTo:t}))return a}function St(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function It(e){return e instanceof HTMLInputElement&&"select"in e}function N(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&It(e)&&t&&e.select()}}const re=Lt();function Lt(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=ce(e,t),e.unshift(t)},remove(t){var a;e=ce(e,t),(a=e[0])===null||a===void 0||a.resume()}}}function ce(e,t){const a=[...e],n=a.indexOf(t);return n!==-1&&a.splice(n,1),a}function kt(e){return e.filter(t=>t.tagName!=="A")}const Mt=o.forwardRef((e,t)=>{var a;const{container:n=globalThis==null||(a=globalThis.document)===null||a===void 0?void 0:a.body,...s}=e;return n?Ge.createPortal(o.createElement(_.div,p({},s,{ref:t})),n):null}),fe="Dialog",[$e,pe]=Q(fe),[Ut,y]=$e(fe),Kt=e=>{const{__scopeDialog:t,children:a,open:n,defaultOpen:s,onOpenChange:r,modal:d=!0}=e,l=o.useRef(null),i=o.useRef(null),[f=!1,u]=Ze({prop:n,defaultProp:s,onChange:r});return o.createElement(Ut,{scope:t,triggerRef:l,contentRef:i,contentId:K(),titleId:K(),descriptionId:K(),open:f,onOpenChange:u,onOpenToggle:o.useCallback(()=>u(b=>!b),[u]),modal:d},a)},Wt="DialogTrigger",Bt=o.forwardRef((e,t)=>{const{__scopeDialog:a,...n}=e,s=y(Wt,a),r=O(t,s.triggerRef);return o.createElement(_.button,p({type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Z(s.open)},n,{ref:r,onClick:w(e.onClick,s.onOpenToggle)}))}),be="DialogPortal",[zt,me]=$e(be,{forceMount:void 0}),Ht=e=>{const{__scopeDialog:t,forceMount:a,children:n,container:s}=e,r=y(be,t);return o.createElement(zt,{scope:t,forceMount:a},o.Children.map(n,d=>o.createElement(Y,{present:a||r.open},o.createElement(Mt,{asChild:!0,container:s},d))))},G="DialogOverlay",Vt=o.forwardRef((e,t)=>{const a=me(G,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,r=y(G,e.__scopeDialog);return r.modal?o.createElement(Y,{present:n||r.open},o.createElement(Gt,p({},s,{ref:t}))):null}),Gt=o.forwardRef((e,t)=>{const{__scopeDialog:a,...n}=e,s=y(G,a);return o.createElement(Ye,{as:qe,allowPinchZoom:!0,shards:[s.contentRef]},o.createElement(_.div,p({"data-state":Z(s.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),P="DialogContent",Qt=o.forwardRef((e,t)=>{const a=me(P,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,r=y(P,e.__scopeDialog);return o.createElement(Y,{present:n||r.open},r.modal?o.createElement(Yt,p({},s,{ref:t})):o.createElement(qt,p({},s,{ref:t})))}),Yt=o.forwardRef((e,t)=>{const a=y(P,e.__scopeDialog),n=o.useRef(null),s=O(t,a.contentRef,n);return o.useEffect(()=>{const r=n.current;if(r)return Xe(r)},[]),o.createElement(ge,p({},e,{ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:w(e.onCloseAutoFocus,r=>{var d;r.preventDefault(),(d=a.triggerRef.current)===null||d===void 0||d.focus()}),onPointerDownOutside:w(e.onPointerDownOutside,r=>{const d=r.detail.originalEvent,l=d.button===0&&d.ctrlKey===!0;(d.button===2||l)&&r.preventDefault()}),onFocusOutside:w(e.onFocusOutside,r=>r.preventDefault())}))}),qt=o.forwardRef((e,t)=>{const a=y(P,e.__scopeDialog),n=o.useRef(!1),s=o.useRef(!1);return o.createElement(ge,p({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var d;if((d=e.onCloseAutoFocus)===null||d===void 0||d.call(e,r),!r.defaultPrevented){var l;n.current||(l=a.triggerRef.current)===null||l===void 0||l.focus(),r.preventDefault()}n.current=!1,s.current=!1},onInteractOutside:r=>{var d,l;(d=e.onInteractOutside)===null||d===void 0||d.call(e,r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=r.target;((l=a.triggerRef.current)===null||l===void 0?void 0:l.contains(i))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}}))}),ge=o.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:r,...d}=e,l=y(P,a),i=o.useRef(null),f=O(t,i);return Je(),o.createElement(o.Fragment,null,o.createElement(Tt,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:r},o.createElement(Ct,p({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Z(l.open)},d,{ref:f,onDismiss:()=>l.onOpenChange(!1)}))),!1)}),ve="DialogTitle",Xt=o.forwardRef((e,t)=>{const{__scopeDialog:a,...n}=e,s=y(ve,a);return o.createElement(_.h2,p({id:s.titleId},n,{ref:t}))}),Jt="DialogDescription",Zt=o.forwardRef((e,t)=>{const{__scopeDialog:a,...n}=e,s=y(Jt,a);return o.createElement(_.p,p({id:s.descriptionId},n,{ref:t}))}),ea="DialogClose",ta=o.forwardRef((e,t)=>{const{__scopeDialog:a,...n}=e,s=y(ea,a);return o.createElement(_.button,p({type:"button"},n,{ref:t,onClick:w(e.onClick,()=>s.onOpenChange(!1))}))});function Z(e){return e?"open":"closed"}const aa="DialogTitleWarning",[oa,qa]=Qe(aa,{contentName:P,titleName:ve,docsSlug:"dialog"}),na=Kt,sa=Bt,ra=Ht,ca=Vt,la=Qt,da=Xt,ia=Zt,xe=ta,ua="AlertDialog",[fa,Xa]=Q(ua,[pe]),R=pe(),$a=e=>{const{__scopeAlertDialog:t,...a}=e,n=R(t);return o.createElement(na,p({},n,a,{modal:!0}))},pa=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,s=R(a);return o.createElement(sa,p({},s,n,{ref:t}))}),ba=e=>{const{__scopeAlertDialog:t,...a}=e,n=R(t);return o.createElement(ra,p({},n,a))},ma=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,s=R(a);return o.createElement(ca,p({},s,n,{ref:t}))}),he="AlertDialogContent",[ga,va]=fa(he),xa=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:n,...s}=e,r=R(a),d=o.useRef(null),l=O(t,d),i=o.useRef(null);return o.createElement(oa,{contentName:he,titleName:ha,docsSlug:"alert-dialog"},o.createElement(ga,{scope:a,cancelRef:i},o.createElement(la,p({role:"alertdialog"},r,s,{ref:l,onOpenAutoFocus:w(s.onOpenAutoFocus,f=>{var u;f.preventDefault(),(u=i.current)===null||u===void 0||u.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault()}),o.createElement(et,null,n),!1)))}),ha="AlertDialogTitle",Ea=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,s=R(a);return o.createElement(da,p({},s,n,{ref:t}))}),Da=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,s=R(a);return o.createElement(ia,p({},s,n,{ref:t}))}),_a=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,s=R(a);return o.createElement(xe,p({},s,n,{ref:t}))}),ya="AlertDialogCancel",Aa=o.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...n}=e,{cancelRef:s}=va(ya,a),r=R(a),d=O(t,s);return o.createElement(xe,p({},r,n,{ref:d}))}),wa=$a,Ra=pa,Na=ba,Ee=ma,De=xa,_e=_a,ye=Aa,Ae=Ea,we=Da,Ca=wa,Oa=Ra,Pa=Na,Re=o.forwardRef(({className:e,...t},a)=>c.jsx(Ee,{className:v("fixed inset-0 z-50 bg-white/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-slate-950/80",e),...t,ref:a}));Re.displayName=Ee.displayName;const Ne=o.forwardRef(({className:e,...t},a)=>c.jsxs(Pa,{children:[c.jsx(Re,{}),c.jsx(De,{ref:a,className:v("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] dark:border-slate-800 dark:bg-slate-950 sm:rounded-lg md:w-full",e),...t})]}));Ne.displayName=De.displayName;const Ce=({className:e,...t})=>c.jsx("div",{className:v("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ce.displayName="AlertDialogHeader";const Oe=({className:e,...t})=>c.jsx("div",{className:v("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Oe.displayName="AlertDialogFooter";const Pe=o.forwardRef(({className:e,...t},a)=>c.jsx(Ae,{ref:a,className:v("text-lg font-semibold",e),...t}));Pe.displayName=Ae.displayName;const Te=o.forwardRef(({className:e,...t},a)=>c.jsx(we,{ref:a,className:v("text-sm text-slate-500 dark:text-slate-400",e),...t}));Te.displayName=we.displayName;const Fe=o.forwardRef(({className:e,...t},a)=>c.jsx(_e,{ref:a,className:v(q(),e),...t}));Fe.displayName=_e.displayName;const je=o.forwardRef(({className:e,...t},a)=>c.jsx(ye,{ref:a,className:v(q({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));je.displayName=ye.displayName;function Ta({onDelete:e}){return c.jsxs(Ca,{children:[c.jsx(Oa,{className:"absolute left-2 top-1 hidden text-xs group-hover:block",children:"❌"}),c.jsxs(Ne,{children:[c.jsxs(Ce,{children:[c.jsx(Pe,{children:"您确定删除该好友吗？"}),c.jsx(Te,{children:"此操作无法撤消，这将永久删除您的好友。"})]}),c.jsxs(Oe,{children:[c.jsx(je,{children:"取消"}),c.jsx(Fe,{onClick:e,children:"确认"})]})]})]})}const Se="Avatar",[Fa,Ja]=Q(Se),[ja,Ie]=Fa(Se),Sa=o.forwardRef((e,t)=>{const{__scopeAvatar:a,...n}=e,[s,r]=o.useState("idle");return o.createElement(ja,{scope:a,imageLoadingStatus:s,onImageLoadingStatusChange:r},o.createElement(_.span,p({},n,{ref:t})))}),Ia="AvatarImage",La=o.forwardRef((e,t)=>{const{__scopeAvatar:a,src:n,onLoadingStatusChange:s=()=>{},...r}=e,d=Ie(Ia,a),l=Ua(n),i=j(f=>{s(f),d.onImageLoadingStatusChange(f)});return le(()=>{l!=="idle"&&i(l)},[l,i]),l==="loaded"?o.createElement(_.img,p({},r,{ref:t,src:n})):null}),ka="AvatarFallback",Ma=o.forwardRef((e,t)=>{const{__scopeAvatar:a,delayMs:n,...s}=e,r=Ie(ka,a),[d,l]=o.useState(n===void 0);return o.useEffect(()=>{if(n!==void 0){const i=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(i)}},[n]),d&&r.imageLoadingStatus!=="loaded"?o.createElement(_.span,p({},s,{ref:t})):null});function Ua(e){const[t,a]=o.useState("idle");return le(()=>{if(!e){a("error");return}let n=!0;const s=new window.Image,r=d=>()=>{n&&a(d)};return a("loading"),s.onload=r("loaded"),s.onerror=r("error"),s.src=e,()=>{n=!1}},[e]),t}const Le=Sa,ke=La,Me=Ma,Ue=o.forwardRef(({className:e,...t},a)=>c.jsx(Le,{ref:a,className:v("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ue.displayName=Le.displayName;const Ke=o.forwardRef(({className:e,...t},a)=>c.jsx(ke,{ref:a,className:v("aspect-square h-full w-full",e),...t}));Ke.displayName=ke.displayName;const We=o.forwardRef(({className:e,...t},a)=>c.jsx(Me,{ref:a,className:v("flex h-full w-full items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",e),...t}));We.displayName=Me.displayName;function Ka({friend:e,onDeleteFriend:t}){const a=tt(),n=Number(a.friendId),s=e.id===n,{setShowAddFriend:r}=X();function d(){r(!1)}const l=at(e.name,5),i=window.location.search;return c.jsxs("li",{className:v("group relative flex items-center justify-between gap-2 rounded px-4 py-2 hover:bg-amber-100 dark:hover:text-slate-700",s&&"bg-amber-100 dark:text-night-1"),children:[c.jsx(Ta,{onDelete:()=>t(e)}),c.jsxs(Ue,{children:[c.jsx(Ke,{src:e.image,alt:l}),c.jsx(We,{children:l})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx(gt,{children:c.jsxs(vt,{children:[c.jsx(xt,{asChild:!0,children:c.jsxs("span",{className:"text-lg font-bold",children:[l," 🎂 ",e.birthday]})}),c.jsx(ht,{children:e.name})]})}),e.balance>0&&c.jsxs("p",{className:"text-green-500",children:[l," 欠您 $",e.balance]}),e.balance<0&&c.jsxs("p",{className:"text-red-500 dark:text-red-600",children:["您欠 ",l," $",Math.abs(e.balance)]}),e.balance===0&&c.jsxs("p",{children:["你和 ",l," 互不相欠"]})]}),c.jsx(ot,{to:s?`/split-bill${i}`:`/split-bill/${e.id}${i}`,state:{noRefresh:!0},onClick:d,className:q({variant:"default"}),children:s?"关闭":"选择"})]})}function Be({key:e,modifiers:t=[]},a){const n=Et({key:e,modifiers:t,callback:a});S.useEffect(()=>{function s(r){var f;const{key:d,modifiers:l,callback:i}=n.current;((f=r.key)==null?void 0:f.toLowerCase())===d.toLowerCase()&&l.every(u=>r[u])&&i()}return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[n])}function Wa(){const e=S.useRef(null),[t,a]=de(),n=t.get(H)||"";Be({key:"\\",modifiers:["ctrlKey"]},()=>{var l;document.activeElement!==e.current&&((l=e.current)==null||l.focus())});const s=J();function r(l){return t.set(H,l.target.value),a(t,{replace:!0,state:{noRefresh:!0}})}function d(){s(`/split-bill${window.location.search}`,{replace:!0,state:{noRefresh:!0}})}return c.jsx(yt,{value:n,onChange:r,onFocus:d,ref:e,placeholder:"搜索好友...",className:"mb-4 dark:border-amber-500"})}const Ba=nt(W`relative w-full rounded-lg border border-slate-200 px-4 py-3 text-sm dark:border-slate-800 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-slate-950 dark:[&>svg]:text-slate-50 [&>svg~*]:pl-7`,{variants:{variant:{default:W`bg-white text-slate-950 dark:bg-slate-950 dark:text-slate-50`,destructive:W`border-red-500/50 text-red-500 dark:border-red-500 dark:border-red-600 dark:border-red-600/50 dark:text-red-600 [&>svg]:text-red-500 dark:[&>svg]:text-red-600`}},defaultVariants:{variant:"default"}}),L=o.forwardRef(({className:e,variant:t,...a},n)=>c.jsx("div",{ref:n,role:"alert",className:v(Ba({variant:t}),e),...a}));L.displayName="Alert";const k=o.forwardRef(({className:e,...t},a)=>c.jsx("h5",{ref:a,className:v("mb-1 font-medium leading-none tracking-tight",e),...t}));k.displayName="AlertTitle";const M=o.forwardRef(({className:e,...t},a)=>c.jsx("div",{ref:a,className:v("text-sm [&_p]:leading-relaxed",e),...t}));M.displayName="AlertDescription";function za(){const e=X(),{loadingFriends:t,getFriends:a,deleteFriend:n,setShowAddFriend:s}=e;let{friends:r,errorFriends:d}=e;t&&(d="",r=[]);const[l]=de(),i=l.get(H)||"",f=i?r.filter(h=>h.name.toLowerCase().includes(i.toLowerCase())):r,u=st();Dt(()=>{var $;if((($=u.state)==null?void 0:$.noRefresh)===!0){u.state&&(u.state.noRefresh=!1);return}s(!1);const h=a();return()=>h()});const{toast:b}=rt(),T=J();function m(h){n(h.id),b({title:"删除好友",description:`成功删除好友：${h.name}`}),T(`/split-bill${window.location.search}`,{replace:!0,state:{noRefresh:!0}})}return c.jsxs(c.Fragment,{children:[c.jsx(Wa,{}),c.jsx(At,{children:c.jsx(ct,{className:"h-96 w-96 md:h-[30rem] md:w-[22rem] lg:h-[24rem] lg:w-[30rem]",children:c.jsxs("div",{className:"space-y-4 p-4",children:[t&&c.jsxs(L,{children:[c.jsx(lt,{className:"mr-2 h-4 w-4 animate-spin"}),c.jsx(k,{children:"加载中..."}),c.jsx(M,{children:"好友列表加载中"})]}),d&&c.jsxs(L,{variant:"destructive",children:[c.jsx(dt,{className:"h-4 w-4"}),c.jsx(k,{children:"错误"}),c.jsx(M,{children:d})]}),!t&&!d&&f.length===0&&c.jsxs(L,{children:[c.jsx(it,{className:"h-4 w-4"}),c.jsx(k,{children:"温馨提示！"}),c.jsx(M,{children:"还没有好友，添加好友即可分摊账单"})]}),f.length>0&&c.jsx("ul",{children:f.map((h,$,A)=>c.jsxs(S.Fragment,{children:[c.jsx(Ka,{friend:h,onDeleteFriend:m}),$<A.length-1&&c.jsx(ut,{className:"my-2"})]},h.id))})]})})})]})}const Ha=S.lazy(()=>bt(2).then(()=>mt(()=>import("./AddFriend-c277c27e.js"),["assets/AddFriend-c277c27e.js","assets/index-132372d4.js","assets/index-53344f33.css","assets/index-8deb8405.js","assets/CustomFormField-e959eb86.js","assets/use-title-f4fa0656.js"]).then(e=>({default:e.AddFriend}))));function Za(){_t("分摊账单");const{showAddFriend:e,setShowAddFriend:t}=X(),a=J();Be({key:"Escape"},()=>{t(!1),a("/split-bill",{state:{noRefresh:!0}})});function n(){t(!e)}return c.jsxs("div",{className:"grid grid-flow-row items-center justify-center gap-6 p-4 md:mt-6 md:grid-cols-2",children:[c.jsx("div",{className:"md:col-span-1 md:row-span-1 md:justify-self-end",children:c.jsx(za,{})}),c.jsxs("div",{className:"flex flex-col gap-6 self-start md:col-span-1 md:row-start-2 md:row-end-3 md:justify-self-end",children:[c.jsx(S.Suspense,{fallback:c.jsx(ft,{}),children:e&&c.jsx(Ha,{})}),c.jsx("div",{className:"self-end",children:c.jsx($t,{onClick:n,children:e?"关闭":"添加好友"})})]}),c.jsx("div",{className:"md:col-start-2 md:col-end-3 md:row-span-1",children:c.jsx(pt,{})})]})}export{Za as default};
