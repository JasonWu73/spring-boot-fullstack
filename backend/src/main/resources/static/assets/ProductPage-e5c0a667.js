import{s as m,R as u,d as h,j as s,B as x,c as j,e as p}from"./index-132372d4.js";import{u as g,a as f}from"./use-title-f4fa0656.js";async function b(e){const a=Math.floor(Math.random()*110);return await m({payload:e,url:`products/${a}`})}function y(){g("随机商品");const[e,a]=u.useState(0),{data:r,loading:t,error:c,fetchData:l}=h(async o=>{const n=await b(o);return!n.error&&n.data&&a(i=>i+1),n});return f(()=>{const o=l();return()=>o()}),s.jsxs("div",{className:"mx-auto mt-8 grid w-[500px] grid-cols-1 grid-rows-[2rem_8rem_3rem_2rem] place-items-center gap-4 rounded border p-4 shadow-sm",children:[s.jsxs("div",{className:"row-span-1",children:[t&&s.jsx(d,{label:"加载中..."}),c&&s.jsx(d,{label:c,isError:!0}),r&&s.jsx(d,{label:r.title})]}),s.jsxs("div",{className:"row-span-1",children:[!r&&s.jsx("div",{className:"h-32 w-32 rounded-full border border-gray-300 bg-gradient-to-r from-slate-100 to-slate-300 object-cover shadow-sm"}),r&&s.jsx("img",{src:r.thumbnail,alt:r.title,className:"h-32 w-32 rounded-full border border-gray-300 object-cover shadow-sm"})]}),s.jsx("div",{className:"row-span-1",children:s.jsxs(x,{onClick:()=>l(),className:"my-4",disabled:t,children:[t&&s.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"}),"获取商品"]})}),s.jsx("div",{className:"row-span-1",children:s.jsx(w,{count:e})})]})}function d({label:e,isError:a=!1}){return s.jsx("h3",{className:p(a&&"text-red-500 dark:text-red-600"),children:e})}function w({count:e}){return s.jsxs("p",{children:["已加载 ",s.jsx("strong",{children:e})," 个商品"]})}export{y as default};
