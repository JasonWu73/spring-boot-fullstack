import{p as c,j as e,B as b}from"./index-30b8b146.js";import{z as r,t as h}from"./index-78ae11f9.js";import{u as p,C as x,a as g,b as u,d as y,F as f,e as d,V as j,m as F}from"./CustomFormField-c3da1ef7.js";import{u as D}from"./use-title-ad20ba35.js";const N=r.object({name:r.string().min(1,"å¿…é¡»è¾“å…¥å§“å").trim(),image:r.string().url({message:"å›¾ç‰‡å¿…é¡»æ˜¯æœ‰æ•ˆçš„ URL"}).trim(),birthday:r.date({required_error:"å¿…é¡»é€‰æ‹©å¥½å‹ç”Ÿæ—¥"}).max(new Date,"ç”Ÿæ—¥ä¸èƒ½æ˜¯æœªæ¥çš„æ—¥æœŸ")}),S={name:"",image:"https://i.pravatar.cc/150",birthday:void 0};function W(){var l,i,n;D("æ·»åŠ å¥½å‹");const a=p({resolver:h(N),defaultValues:S}),{dispatch:s}=c();function m(t){const o=Date.now();s({type:"ADD_FRIEND",payload:{id:o,name:t.name,image:`${t.image}?u=${o}`,birthday:F(t.birthday,"yyyy-MM-dd"),balance:0,creditRating:0}}),s({type:"SHOW_ADD_FRIEND_FORM",payload:!1})}return e.jsxs(x,{className:"bg-amber-100 text-slate-950 dark:bg-amber-100 dark:text-slate-950",children:[e.jsx(g,{children:e.jsx(u,{children:"æ·»åŠ å¥½å‹"})}),e.jsx(y,{children:e.jsx(f,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(m),className:"flex flex-col gap-4",children:[e.jsx(d,{control:a.control,name:"name",type:"text",label:"ðŸ‘« å¥½å‹åå­—",labelWidth:100,placeholder:"å¥½å‹åå­—",isError:(l=a.getFieldState("name"))==null?void 0:l.invalid,className:"bg-slate-50"}),e.jsx(d,{control:a.control,name:"image",type:"text",label:"ðŸŒ„ å›¾ç‰‡ç½‘å€",labelWidth:100,placeholder:"å›¾ç‰‡ç½‘å€",isError:(i=a.getFieldState("image"))==null?void 0:i.invalid,className:"bg-slate-50"}),e.jsx(j,{control:a.control,name:"birthday",label:"ðŸŽ‚ å¥½å‹ç”Ÿæ—¥",labelWidth:100,placeholder:"é€‰æ‹©å¥½å‹ç”Ÿæ—¥",disabledWhen:t=>t>new Date||t<new Date("1900-01-01"),isError:(n=a.getFieldState("birthday"))==null?void 0:n.invalid,className:"bg-slate-50"}),e.jsx(b,{type:"submit",className:"self-end",children:"æ·»åŠ "})]})})})]})}export{W as AddFriend};
