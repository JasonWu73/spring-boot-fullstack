import{D as h,j as e,B as x}from"./index-132372d4.js";import{z as t,t as g}from"./index-8deb8405.js";import{u,C as p,a as f,b as j,d as y,F,e as s,k as w,l as S}from"./CustomFormField-e959eb86.js";import{u as C}from"./use-title-f4fa0656.js";const D=t.object({name:t.string().min(1,"必须输入姓名"),image:t.string().url({message:"图片必须是有效的 URL"}),birthday:t.date({required_error:"必须选择好友生日"}).max(new Date,"生日不能是未来的日期")});function N(){var i,n,d;C("添加好友");const a=u({resolver:g(D),defaultValues:{name:"",image:"https://i.pravatar.cc/150",birthday:void 0}}),{addFriend:o,setShowAddFriend:m}=h();function c(r){const l=Date.now(),b={id:l,name:r.name,image:`${r.image}?u=${l}`,birthday:S(r.birthday,"yyyy-MM-dd"),balance:0,creditRating:0};o(b),m(!1)}return e.jsxs(p,{className:"w-96 bg-amber-100 text-slate-700 dark:bg-amber-100 dark:text-slate-700 md:w-[22rem] lg:w-[30rem]",children:[e.jsx(f,{children:e.jsx(j,{children:"添加好友"})}),e.jsx(y,{children:e.jsx(F,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(c),className:"flex flex-col gap-4",children:[e.jsx(s,{control:a.control,name:"name",type:"text",label:"👫 好友名字",labelWidth:100,placeholder:"好友名字",isError:(i=a.getFieldState("name"))==null?void 0:i.invalid}),e.jsx(s,{control:a.control,name:"image",type:"text",label:"🌄 图片网址",labelWidth:100,placeholder:"图片网址",isError:(n=a.getFieldState("image"))==null?void 0:n.invalid}),e.jsx(w,{control:a.control,name:"birthday",label:"🎂 好友生日",labelWidth:100,placeholder:"选择好友生日",disabledWhen:r=>r>new Date||r<new Date("1900-01-01"),isError:(d=a.getFieldState("birthday"))==null?void 0:d.invalid}),e.jsx(x,{type:"submit",className:"self-end",children:"添加"})]})})})]})}export{N as AddFriend};
