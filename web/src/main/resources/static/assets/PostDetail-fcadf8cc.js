import{bb as C,aO as P,aK as v,aF as a,bc as x,aG as o,as as p,aJ as l,R}from"./SuspenseLoading-261fce6d.js";import{u as g,a as u,n as w,z as i,B as D,C as S,F as k,v as A}from"./main-2b08f4d2.js";import{T as B,g as G}from"./PostTags-7b7c3924.js";import{TAGS as N}from"./NewPost-b239ca86.js";import{B as d}from"./RouteError-62a31d50.js";import"./index-f7865dd5.js";import"./index-e353cf84.js";function L(){const{postId:s}=C(),t=j(s);P(`文章详情 - ${(t==null?void 0:t.title)||""}`);const n=g(e=>e.ui.loading),r=u(),h=v();if(n)return a(x,{});if(!t)return a(w,{});function m(){!t||t.tags.length===0||t.title.trim().length===0||t.body.trim().length===0||r(S())}return o(p,{direction:"vertical",style:{width:"100%"},children:[o("div",{style:{display:"flex",gap:"1rem"},children:[o(l.Title,{level:2,children:[s,"."]}),a(l.Title,{level:2,editable:{onChange:e=>e.trim().length>0&&r(i({...t,title:e.trim()}))},style:{marginTop:0,flexGrow:1},children:t.title})]}),a(D,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"请选择文章所对应的标签",options:N,defaultValue:t.tags,onChange:e=>r(i({...t,tags:e})),status:t.tags.length===0?"error":"",tagRender:e=>{const{label:f,value:y,closable:b,onClose:T}=e;return a(B,{color:G(y),onMouseDown:c=>{c.preventDefault(),c.stopPropagation()},closable:b,onClose:T,style:{marginRight:3},children:f})}}),t.tags.length===0&&a(l.Text,{type:"danger",children:"文章标签不能为空"}),a(l.Paragraph,{editable:{onChange:e=>e.trim().length>0&&r(i({...t,body:e.trim()}))},style:{marginTop:"1rem"},children:t.body}),o(l.Paragraph,{children:["用户 ID：",t.userId]}),o(p,{children:[a(d,{onClick:()=>h(".."),children:"返回"}),a(d,{type:"primary",onClick:m,children:"更新"})]})]})}function j(s){const t=u(),n=g(r=>r.post.post);return R.useEffect(()=>{if(!s||isNaN(+s))return;const r=t(k(+s));return()=>{r.abort(),t(A())}},[]),n}export{L as default};
